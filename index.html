<style>
  #video-background {
    position: fixed;
    right: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
    z-index: -1;
    object-fit: cover;
  }
  .post-body {
    position: relative;
    z-index: 1;
    background: rgba(0, 0, 0, 0.4); /* fundo semitransparente pra contraste */
    color: white;
    padding: 20px;
  }
</style>

<video autoplay muted loop id="video-background" playsinline>
  <source src="https://piratetv.pro/wp-content/themes/Pirate%20TV%204v/assets/images/top-bg.mp4" type="video/mp4">
  Seu navegador nÃ£o suporta vÃ­deo.
</video>


</style>

</head>

<body>

<h1>TV ONLINE</h1>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Player Completo - AnimaÃ§Ã£o na Capa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    <style>
        #capa {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 15px;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }
        #capa.fade-out {
            opacity: 0;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <h2 class="mb-4">Player Completo <span id="iconeCategoria"></span></h2>

    <!-- SeleÃ§Ã£o de Categoria -->
    <div class="mb-3">
        <label class="form-label">Escolha a Categoria:</label>
        <select id="categoria" class="form-select">
            <option value="filmes">ðŸŽ¬ Filmes</option>
            <option value="series">ðŸ“º SÃ©ries</option>
            <option value="tv">ðŸ“¡ TV</option>
            <option value="radio">ðŸŽµ RÃ¡dio</option>
        </select>
    </div>

    <!-- SeleÃ§Ã£o de ConteÃºdo -->
    <div class="mb-3">
        <label class="form-label">Escolha o ConteÃºdo:</label>
        <select id="conteudo" class="form-select"></select>
    </div>

    <!-- Capa -->
    <img id="capa" src="" alt="Capa do conteÃºdo" class="d-none">

    <!-- Player -->
    <div id="player"></div>
</div>

<script>
const playlist = {
    filmes: [
        { nome: 'AÃ§Ã£o Explosiva', url: 'http://exemplo.com/filmes/acao_explosiva.m3u8', capa: 'https://via.placeholder.com/600x350.png?text=AÃ§Ã£o+Explosiva' },
        { nome: 'ComÃ©dia Total', url: 'http://exemplo.com/filmes/comedia_total.m3u8', capa: 'https://via.placeholder.com/600x350.png?text=ComÃ©dia+Total' }
    ],
    series: [
        { nome: 'MistÃ©rio Urbano S01E01', url: 'http://exemplo.com/series/misterio_urbano_s01e01.m3u8', capa: 'https://via.placeholder.com/600x350.png?text=MistÃ©rio+Urbano' },
        { nome: 'FicÃ§Ã£o GalÃ¡ctica S02E05', url: 'http://exemplo.com/series/ficcao_galactica_s02e05.m3u8', capa: 'https://via.placeholder.com/600x350.png?text=FicÃ§Ã£o+GalÃ¡ctica' }
    ],
    tv: [
        { nome: 'Canal Esportes', url: '', capa: 'https://via.placeholder.com/600x350.png?text=Canal+Esportes' },
        { nome: 'Canal Esportes', url: '', capa: 'https://via.placeholder.com/600x350.png?text=Canal+Esportes' },
        { nome: 'Canal Esportes', url: '', capa: 'https://via.placeholder.com/600x350.png?text=Canal+Esportes' },
        { nome: 'Canal Filmes', url: 'https://stream.ads.ottera.tv/playlist.m3u8?network_id=5431', capa: 'https://via.placeholder.com/600x350.png?text=Canal+Filmes' }
    ],
    radio: [
        { nome: 'RÃ¡dio Pop', url: 'http://exemplo.com/radio/radio_pop.m3u8', capa: 'https://via.placeholder.com/600x350.png?text=RÃ¡dio+Pop' },
        { nome: 'RÃ¡dio ClÃ¡ssica', url: 'http://exemplo.com/radio/radio_classica.m3u8', capa: 'https://via.placeholder.com/600x350.png?text=RÃ¡dio+ClÃ¡ssica' }
    ]
};

const icones = {
    filmes: 'ðŸŽ¬',
    series: 'ðŸ“º',
    tv: 'ðŸ“¡',
    radio: 'ðŸŽµ'
};

const categoriaSelect = document.getElementById('categoria');
const conteudoSelect = document.getElementById('conteudo');
const capaImg = document.getElementById('capa');
const iconeCategoria = document.getElementById('iconeCategoria');

categoriaSelect.addEventListener('change', () => {
    atualizarConteudos();
    iniciarPlayer();
});

conteudoSelect.addEventListener('change', () => {
    atualizarCapa(() => iniciarPlayer());
});

function atualizarConteudos() {
    const categoria = categoriaSelect.value;
    iconeCategoria.textContent = icones[categoria];
    conteudoSelect.innerHTML = '';
    playlist[categoria].forEach((item, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = item.nome;
        conteudoSelect.appendChild(option);
    });
    atualizarCapa();
}

function atualizarCapa(callback) {
    const categoria = categoriaSelect.value;
    const index = conteudoSelect.value;
    const capa = playlist[categoria][index]?.capa;

    if (capa) {
        capaImg.classList.add('fade-out');
        setTimeout(() => {
            capaImg.src = capa;
            capaImg.classList.remove('fade-out');
            capaImg.classList.remove('d-none');
            if (callback) callback();
        }, 500);  // Tempo igual ao transition
    } else {
        capaImg.classList.add('d-none');
        if (callback) callback();
    }
}

let player;

function iniciarPlayer() {
    const categoria = categoriaSelect.value;
    const index = conteudoSelect.value;
    const url = playlist[categoria][index].url;

    if (player) {
        player.destroy();
    }

    player = new Clappr.Player({
        source: url,
        parentId: '#player',
        width: '100%',
        height: '400px',
        autoPlay: true,
        mute: false
    });
  
