<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Blogflixtv - M3U Player</title>
  <style>
    body { margin: 0; font-family: sans-serif; background-color: #000; color: #fff; }
    h1 { text-align: center; padding: 20px; background: #ff0; color: #000; }
    .top-bar { display: flex; justify-content: center; padding: 10px; background: #111; }
    .top-bar a { background: #ff0; color: #000; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding: 20px; }
    .card { background: #111; border: 2px solid #ff0; padding: 15px; border-radius: 10px; box-shadow: 0 0 10px #ff0a; transition: transform 0.3s ease; }
    .card:hover { transform: scale(1.05); }
    .card video, .card audio, .card iframe { width: 100%; height: 200px; border: none; border-radius: 8px; }
    .card p { margin-top: 10px; text-align: center; font-weight: bold; }
    .qr-button { position: fixed; bottom: 20px; right: 20px; background: #fff; border: 2px solid #ff0; padding: 5px; border-radius: 10px; z-index: 999; }
    .qr-button img { width: 80px; height: 80px; }
  </style>
</head>
<body>

  <div class="top-bar">
    <a href="https://684651bf490c3ff215f9d3a9--fancy-fenglisu-8c907b.netlify.app/" target="_blank">üîê √Årea Restrita</a>
  </div>

  <h1>Blogflixtv - Player ao Vivo (M3U)</h1>

  <div class="grid" id="playerContainer">Carregando lista...</div>

  <a class="qr-button" href="https://blogflixtv.netlify.app/" target="_blank">
    <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://blogflixtv.netlify.app/&size=100x100" alt="QR Code">
  </a>

  <script>
    const listaUrl = "minha-lista.m3u";

    fetch(listaUrl)
      .then(r => r.text())
      .then(texto => {
        const linhas = texto.trim().split("\n");
        const container = document.getElementById("playerContainer");
        container.innerHTML = "";

        let tituloAtual = "Conte√∫do";

        for (let i = 0; i < linhas.length; i++) {
          const linha = linhas[i].trim();

          if (linha.startsWith("#EXTINF:")) {
            const partes = linha.split(",");
            if (partes.length > 1) {
              tituloAtual = partes[1].trim();
            }
          } else if (linha && !linha.startsWith("#")) {
            const link = linha;
            const card = document.createElement("div");
            card.className = "card";
            let media;

            if (link.endsWith(".mp4") || link.endsWith(".m3u8") || link.endsWith(".ts")) {
              media = document.createElement("video");
              media.src = link;
              media.controls = true;
            } else if (link.endsWith(".mp3")) {
              media = document.createElement("audio");
              media.src = link;
              media.controls = true;
            } else if (link.includes("youtube.com") || link.includes("youtu.be")) {
              const videoId = link.split("v=")[1]?.split("&")[0] || link.split("/").pop();
              media = document.createElement("iframe");
              media.src = `https://www.youtube.com/embed/${videoId}`;
              media.allowFullscreen = true;
            } else {
              media = document.createElement("iframe");
              media.src = link;
            }

            card.appendChild(media);
            const desc = document.createElement("p");
            desc.textContent = tituloAtual;
            card.appendChild(desc);
            container.appendChild(card);
          }
        }
      })
      .catch(err => {
        document.getElementById("playerContainer").innerHTML = "Erro ao carregar a lista.";
        console.error("Erro:", err);
      });
  </script>

</body>
</html>
